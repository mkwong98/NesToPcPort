#pragma once
#include <SDL3/SDL.h>
#include <vector>

class console;
class mapper;

struct stackEntry {
	bool isPC;
	Uint16 value;
};

struct callStackEntry {
	bool isManual;
	Uint16 value;
};

class game
{
public:
	console* myConsole;
	mapper* myMapper;
	Uint8 a;
	Uint8 x;
	Uint8 y;
	Uint8 s;
	bool flgC;
	bool flgZ;
	bool flgI;
	bool flgD;
	bool flgV;
	bool flgN;
	bool flgB;
	stackEntry poppedEntry;
	callStackEntry poppedStackEntry;
	Uint32 threadSignal;
	Uint32 pushedAddress;
	bool gameEnded;

	game();
	void initGame();
	void endGame();
	Uint8 getStatus();
	void setStatus(Uint8 p);
	void opADC(Uint8 v);
	void opSBC(Uint8 v);
	void opAND(Uint8 v);
	void opORA(Uint8 v);
	void opEOR(Uint8 v);
	void opBIT(Uint8 v);

	void opINC(Uint16 address, Uint8 repeatTimes);
	void opDEC(Uint16 address, Uint8 repeatTimes);
	void opINX(Uint8 repeatTimes);
	void opDEX(Uint8 repeatTimes);
	void opINY(Uint8 repeatTimes);
	void opDEY(Uint8 repeatTimes);

	void opASL_A(Uint8 repeatTimes);
	void opASL_M(Uint16 address, Uint8 repeatTimes);
	void opLSR_A(Uint8 repeatTimes);
	void opLSR_M(Uint16 address, Uint8 repeatTimes);
	void opROL_A(Uint8 repeatTimes);
	void opROL_M(Uint16 address, Uint8 repeatTimes);
	void opROR_A(Uint8 repeatTimes);
	void opROR_M(Uint16 address, Uint8 repeatTimes);
	void opCMP(Uint8 v1, Uint8 v2);

	void setLoadFlag(Uint8 v);

	std::vector<callStackEntry> callStack;
	void pushAddress(Uint16 address);
	void pushManualAddress(Uint16 address);
	void popAddress();
	bool handleReturnAddress(Uint16 address, Uint16 expectedAddress);

	void pushStatus();
	void popStatus();
	void opPLA();
	void opPHA();

	void wait(Uint8 type);
	void signal();

	void repeat();
	void brk();

	bool needWaitScanline;
	Uint8 waitScanline;
	void atScanline(Uint8 scanline);

	void atSprite0Hit();

	void SUB_000000();
	void SUB_000020();
	void SUB_000029();
	void SUB_00019F();
	void SUB_000223();
	void SUB_0002BB();
	void SUB_00038B();
	void SUB_0003CF();
	void SUB_0004D9_GameLogic01();
	void SUB_00091A();
	void SUB_0009B5();
	void SUB_000A0C();
	void SUB_000A11();
	void SUB_000A19();
	void SUB_000A1A();
	void SUB_000A40();
	void SUB_000A62();
	void SUB_000B52();
	void SUB_000B6C();
	void SUB_000B87();
	void SUB_000B93();
	void SUB_000B9C();
	void SUB_000BD0();
	void SUB_000C41();
	void SUB_000CAD();
	void SUB_000CE9();
	void SUB_000D32();
	void SUB_000D3E();
	void SUB_000D58();
	void SUB_000D64();
	void SUB_000D70();
	void SUB_000D87();
	void SUB_000FE1();
	void SUB_00100D();
	void SUB_001049();
	void SUB_001064();
	void SUB_001083();
	void SUB_0010F8();
	void SUB_001156();
	void SUB_001168();
	void SUB_001207();
	void SUB_00122F();
	void SUB_0012DE();
	void SUB_0012EA();
	void SUB_0012EB();
	void SUB_0012FB();
	void SUB_0013A3();
	void SUB_0013D6();
	void SUB_0013E4();
	void SUB_0013E9();
	void SUB_0013EF();
	void SUB_001448();
	void SUB_001466();
	void SUB_001508();
	void SUB_00154B();
	void SUB_0015C9();
	void SUB_0015D3();
	void SUB_0015DA();
	void SUB_0015EC();
	void SUB_001606();
	void SUB_00166B();
	void SUB_00168B();
	void SUB_0016CE();
	void SUB_0016CF();
	void SUB_00170F();
	void SUB_001723();
	void SUB_00172F();
	void SUB_001733();
	void SUB_001745();
	void SUB_00174C();
	void SUB_001753();
	void SUB_00175A();
	void SUB_00175E();
	void SUB_001775();
	void SUB_00177C();
	void SUB_001783();
	void SUB_00178A();
	void SUB_00179F();
	void SUB_0017B4();
	void SUB_0017C9();
	void SUB_0017E3();
	void SUB_0017FC();
	void SUB_001B88();
	void SUB_001B92();
	void SUB_001BE7();
	void SUB_004000();
	void SUB_00402B();
	void SUB_004034();
	void SUB_0041B3();
	void SUB_00424D();
	void SUB_0042E8();
	void SUB_0043D9();
	void SUB_00441D();
	void SUB_004540_GameLogic02();
	void SUB_00483B();
	void SUB_004896();
	void SUB_0048AD();
	void SUB_0048F0();
	void SUB_004979();
	void SUB_004A0B();
	void SUB_004AAA();
	void SUB_004B01();
	void SUB_004B06();
	void SUB_004B0E();
	void SUB_004B0F();
	void SUB_004B1E();
	void SUB_004B37();
	void SUB_004B45();
	void SUB_004B5D();
	void SUB_004C65();
	void SUB_004C82();
	void SUB_004C9D();
	void SUB_004CA9();
	void SUB_004CB2();
	void SUB_004CD2();
	void SUB_004D2A();
	void SUB_004D36();
	void SUB_004D50();
	void SUB_004D67();
	void SUB_004D79();
	void SUB_004EF3();
	void SUB_004F75();
	void SUB_004F7D();
	void SUB_004F85();
	void SUB_004FA0();
	void SUB_004FD8();
	void SUB_004FED_Hovercraft();
	void SUB_0050AD();
	void SUB_0050AE();
	void SUB_0050D5();
	void SUB_0050ED();
	void SUB_005104();
	void SUB_005130();
	void SUB_00513D();
	void SUB_005207();
	void SUB_005254();
	void SUB_005294();
	void SUB_005319();
	void SUB_005387();
	void SUB_0053A9();
	void SUB_00541F();
	void SUB_00542C();
	void SUB_005493();
	void SUB_0054F3();
	void SUB_00550C();
	void SUB_00559F();
	void SUB_0055C7();
	void SUB_0055D3();
	void SUB_0055DF();
	void SUB_0055EB();
	void SUB_0055FE();
	void SUB_005629();
	void SUB_005775();
	void SUB_005793();
	void SUB_005838();
	void SUB_00588C();
	void SUB_0058BD();
	void SUB_0058F0();
	void SUB_0058FE();
	void SUB_005903();
	void SUB_005909();
	void SUB_005962();
	void SUB_00598A();
	void SUB_005A2C();
	void SUB_005A6F();
	void SUB_005ADA();
	void SUB_005AE4();
	void SUB_005AEB();
	void SUB_005AFD();
	void SUB_005B17();
	void SUB_005B37();
	void SUB_005B7A();
	void SUB_005BBB();
	void SUB_005BCF();
	void SUB_005BE8();
	void SUB_005F39();
	void SUB_005F43();
	void SUB_005F9E();
	void SUB_005FCD();
	void SUB_008000();
	void SUB_00802D();
	void SUB_008036();
	void SUB_0081B0();
	void SUB_00821A();
	void SUB_0082BF();
	void SUB_0083A3();
	void SUB_0083D7();
	void SUB_0084CE_GameLogic03();
	void SUB_008796();
	void SUB_0087F1();
	void SUB_008808();
	void SUB_008844();
	void SUB_0088CD();
	void SUB_00895F();
	void SUB_0089FE();
	void SUB_008A55();
	void SUB_008A5A();
	void SUB_008A62();
	void SUB_008A63();
	void SUB_008A72();
	void SUB_008A8B();
	void SUB_008A99();
	void SUB_008AB1();
	void SUB_008B93();
	void SUB_008BB0();
	void SUB_008BCB();
	void SUB_008BD7();
	void SUB_008BE1();
	void SUB_008C0C();
	void SUB_008C32();
	void SUB_008C47();
	void SUB_008CB1();
	void SUB_008CCE();
	void SUB_008D53();
	void SUB_008D70();
	void SUB_008E0C();
	void SUB_008E29();
	void SUB_008E71();
	void SUB_008EAF();
	void SUB_008EC3();
	void SUB_008ED5();
	void SUB_008F1E();
	void SUB_008F5F();
	void SUB_008FE6();
	void SUB_008FF3();
	void SUB_009000();
	void SUB_009029();
	void SUB_009094();
	void SUB_0090B3();
	void SUB_009130();
	void SUB_00913D();
	void SUB_009182();
	void SUB_0091E2();
	void SUB_0091FB();
	void SUB_00926F();
	void SUB_009297();
	void SUB_0092BE();
	void SUB_0092EE();
	void SUB_009337();
	void SUB_009341();
	void SUB_0093C3();
	void SUB_009465();
	void SUB_0094A8();
	void SUB_009513();
	void SUB_00951D();
	void SUB_009524();
	void SUB_009536();
	void SUB_009550();
	void SUB_00959D();
	void SUB_0095BA();
	void SUB_009600();
	void SUB_009601();
	void SUB_009615();
	void SUB_009627();
	void SUB_00968C();
	void SUB_0096A5();
	void SUB_00995E();
	void SUB_009968();
	void SUB_0099D1();
	void SUB_009A10();
	void SUB_00C000();
	void SUB_00C02D();
	void SUB_00C036();
	void SUB_00C1B0();
	void SUB_00C1F0();
	void SUB_00C28B();
	void SUB_00C376();
	void SUB_00C39A();
	void SUB_00C44F_GameLogic04();
	void SUB_00C717();
	void SUB_00C772();
	void SUB_00C789();
	void SUB_00C7CD();
	void SUB_00C856();
	void SUB_00C8E8();
	void SUB_00C987();
	void SUB_00C9E3();
	void SUB_00C9E8();
	void SUB_00C9F0();
	void SUB_00C9F1();
	void SUB_00C9FB();
	void SUB_00CA14();
	void SUB_00CA22();
	void SUB_00CA3A();
	void SUB_00CAFF();
	void SUB_00CB1C();
	void SUB_00CB37();
	void SUB_00CB43();
	void SUB_00CB4D();
	void SUB_00CBAB();
	void SUB_00CBF3();
	void SUB_00CC75();
	void SUB_00CCA1();
	void SUB_00CCBE();
	void SUB_00CD5D();
	void SUB_00CD64();
	void SUB_00CD68();
	void SUB_00CD8E();
	void SUB_00CE88();
	void SUB_00CF29();
	void SUB_00CF4E();
	void SUB_00CF8A();
	void SUB_00CF97();
	void SUB_00CFF1();
	void SUB_00D049();
	void SUB_00D063();
	void SUB_00D0D0();
	void SUB_00D0FA();
	void SUB_00D124();
	void SUB_00D164();
	void SUB_00D1CA();
	void SUB_00D1E6();
	void SUB_00D288();
	void SUB_00D2CB();
	void SUB_00D336();
	void SUB_00D340();
	void SUB_00D347();
	void SUB_00D35E();
	void SUB_00D378();
	void SUB_00D3DC();
	void SUB_00D3F0();
	void SUB_00D409();
	void SUB_00D54A();
	void SUB_00D554();
	void SUB_00D5BD();
	void SUB_00D5F7();
	void SUB_010000();
	void SUB_010003();
	void SUB_01000C();
	void SUB_01000F();
	void SUB_010012();
	void SUB_010031();
	void SUB_0100A6();
	void SUB_01011A();
	void SUB_010209();
	void SUB_01025D();
	void SUB_010279();
	void SUB_010304();
	void SUB_01030A();
	void SUB_01032B();
	void SUB_010365();
	void SUB_01036E();
	void SUB_01037D();
	void SUB_010396();
	void SUB_0103A5();
	void SUB_0103A6();
	void SUB_0103C2();
	void SUB_0103E9();
	void SUB_0103EA();
	void SUB_0103F5();
	void SUB_0103FE();
	void SUB_010425();
	void SUB_010437();
	void SUB_010448();
	void SUB_010486();
	void SUB_0104AA();
	void SUB_0104E5();
	void SUB_0104F6();
	void SUB_010501();
	void SUB_010507();
	void SUB_01055B();
	void SUB_0105BB();
	void SUB_0105CA();
	void SUB_0105E3();
	void SUB_0105F1();
	void SUB_010606();
	void SUB_014000();
	void SUB_015484();
	void SUB_0154D4();
	void SUB_0155A0();
	void SUB_0155C5_ShootingGalleryMain();
	void SUB_015646();
	void SUB_0156CD();
	void SUB_015748();
	void SUB_01577D();
	void SUB_0157B7();
	void SUB_0157CA();
	void SUB_0157DD();
	void SUB_0157FA();
	void SUB_015815_ShootingGallery1();
	void SUB_0158F7_ShootingGallery2();
	void SUB_01597D_ShootingGalleryAimToScroll();
	void SUB_0159A8_ShootingGallerySetScreenScroll();
	void SUB_0159C2_ShootGalleryConvertAimToTileOffset();
	void SUB_015A6D();
	void SUB_015B26();
	void SUB_015B4D();
	void SUB_015C95();
	void SUB_015D0C();
	void SUB_015D96();
	void SUB_015E1C();
	void SUB_016437();
	void SUB_016477();
	void SUB_016489();
	void SUB_0164D5();
	void SUB_0165ED();
	void SUB_016679();
	void SUB_016699();
	void SUB_0166B4();
	void SUB_01673E();
	void SUB_016762();
	void SUB_016785();
	void SUB_0167A0();
	void SUB_0167D1();
	void SUB_01686A_GameLogic05();
	void SUB_016A1B();
	void SUB_016ADC();
	void SUB_016B9D();
	void SUB_016BB5();
	void SUB_016BCF();
	void SUB_016C5E();
	void SUB_016CAC();
	void SUB_016E3E();
	void SUB_016E75();
	void SUB_016EB0();
	void SUB_016EEB();
	void SUB_016F1B();
	void SUB_016F4B();
	void SUB_016F7B();
	void SUB_016FB1();
	void SUB_016FE7();
	void SUB_01701D();
	void SUB_017050();
	void SUB_017085();
	void SUB_0170BA();
	void SUB_0170BC();
	void SUB_0170D0();
	void SUB_0170E2();
	void SUB_01713E();
	void SUB_01716F();
	void SUB_0171B3();
	void SUB_0171DC();
	void SUB_017205();
	void SUB_017281();
	void SUB_0172D5();
	void SUB_017453();
	void SUB_0174D2();
	void SUB_0174FA();
	void SUB_017533();
	void SUB_01754A_Puzzle();
	void SUB_0175A6();
	void SUB_017617();
	void SUB_01764D();
	void SUB_0176CC();
	void SUB_017758();
	void SUB_0177D6();
	void SUB_018000();
	void SUB_019CF1();
	void SUB_019D50();
	void SUB_019D59();
	void SUB_019D79();
	void SUB_019D98();
	void SUB_019DBA();
	void SUB_019E2D();
	void SUB_019EF3();
	void SUB_019F13();
	void SUB_01A073();
	void SUB_01AE8E();
	void SUB_01AEB1();
	void SUB_01AEDD();
	void SUB_01AEE3();
	void SUB_01AF22();
	void SUB_01B005_InputName();
	void SUB_01B031_HighScoreScreen();
	void SUB_01B0E4();
	void SUB_01B119();
	void SUB_01B172();
	void SUB_01B1AC();
	void SUB_01B1C2();
	void SUB_01B1F6();
	void SUB_01B263();
	void SUB_01B2CD();
	void SUB_01B32C();
	void SUB_01B3C1();
	void SUB_01B408();
	void SUB_01B425();
	void SUB_01B53A();
	void SUB_01B5A3();
	void SUB_01B68B();
	void SUB_01B70F();
	void SUB_01B7F4();
	void SUB_01BAFC();
	void SUB_01BB88();
	void SUB_01BBDD();
	void SUB_01BC6F();
	void SUB_01BCA5();
	void SUB_01BCF5();
	void SUB_01BD2E();
	void SUB_01BD5C();
	void SUB_01BD9A();
	void SUB_01BE18();
	void SUB_01C000_StartGame();
	void SUB_01C030();
	void SUB_01C052();
	void SUB_01C060_CopyNukeAndArrest();
	void SUB_01C075();
	void SUB_01C0B6();
	void SUB_01C9F6();
	void SUB_01CA04();
	void SUB_01CA15();
	void SUB_01CA17();
	void SUB_01CA60();
	void SUB_01CA70();
	void SUB_01CAC5();
	void SUB_01CAC6();
	void SUB_01CBA5();
	void SUB_01CD58();
	void SUB_01CDDF();
	void SUB_01CE23();
	void SUB_01CFB3();
	void SUB_01D382();
	void SUB_01D60E();
	void SUB_01DB37();
	void SUB_01DB6A();
	void SUB_01DB89();
	void SUB_01DBA4();
	void SUB_01DBB3();
	void SUB_01DBBA_ReadInput();
	void SUB_01DBDF();
	void SUB_01DBE8();
	void SUB_01DBEB_DetectButtonPress();
	void SUB_01DC63();
	void SUB_01DCB2_Multiply();
	void SUB_01DCD8();
	void SUB_01DCFD();
	void SUB_01DD0B();
	void SUB_01DD26();
	void SUB_01DD2B();
	void SUB_01DD59();
	void SUB_01DD83();
	void SUB_01DE68();
	void SUB_01DED2();
	void SUB_01DEF4();
	void SUB_01DF13();
	void SUB_01DF61();
	void SUB_01DFAC();
	void SUB_01DFCE();
	void SUB_01E0BC();
	void SUB_01E0C9_ApplyWalkingSpeed();
	void SUB_01E195_UpdateWalkingSpeed();
	void SUB_01E1F0();
	void SUB_01E20C();
	void SUB_01E2B7();
	void SUB_01E34E();
	void SUB_01E3C9();
	void SUB_01E496();
	void SUB_01E50E();
	void SUB_01E521();
	void SUB_01E567();
	void SUB_01E587();
	void SUB_01E61C();
	void SUB_01E66B();
	void SUB_01E685();
	void SUB_01E6B8();
	void SUB_01E6E4();
	void SUB_01E740();
	void SUB_01E770();
	void SUB_01E7CA();
	void SUB_01E7DF();
	void SUB_01E81E();
	void SUB_01E830();
	void SUB_01E84A();
	void SUB_01E877();
	void SUB_01E88C();
	void SUB_01E8D6();
	void SUB_01E92A();
	void SUB_01E95B();
	void SUB_01E9E6();
	void SUB_01EA06();
	void SUB_01EA16();
	void SUB_01EA1B_SetupSound();
	void SUB_01EA36();
	void SUB_01EA3E_RestoreBank012();
	void SUB_01EA4F();
	void SUB_01EA98();
	void SUB_01EB66();
	void SUB_01EB90();
	void SUB_01EC81();
	void SUB_01ED03();
	void SUB_01EDE5_MenuUpDown();
	void SUB_01EE3E_MenuSelected();
	void SUB_01EE99();
	void SUB_01EF3D();
	void SUB_01EFCD();
	void SUB_01F036();
	void SUB_01F0C6_RestoreBank012A();
	void SUB_01F0CE();
	void SUB_01F0DA_RestoreBank013();
	void SUB_01F0E1();
	void SUB_01F0EE();
	void SUB_01F0F9();
	void SUB_01F149();
	void SUB_01F155();
	void SUB_01F162();
	void SUB_01F189();
	void SUB_01F218();
	void SUB_01F23A_InitPlayerState();
	void SUB_01F270();
	void SUB_01F2A0();
	void SUB_01F356();
	void SUB_01F822();
	void SUB_01F847();
	void SUB_01F89D();
	void SUB_01FE54();
	void SUB_01FE80();
	void SUB_01FE95_SetScroll();
	void SUB_01FF99_InitMapper();
	void SUB_01FFAA_SwitchCHRBank1();
	void SUB_01FFBE_MapperControl();
	void SUB_01FFD2_SwitchCHRBank0();
	void SUB_01FFE6_SwithPRGBank();
	void nmi();
	void reset();
	void jump(Uint16 target);

};

